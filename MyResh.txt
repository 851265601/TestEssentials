MainPage.xaml

```
<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
             xmlns:local="clr-namespace:App110"
             x:Class="App110.MainPage">

    <!--<ContentPage.BindingContext>
        <local:MainPageViewModel />
    </ContentPage.BindingContext>-->
    <ContentPage.Resources>
        <DataTemplate x:Key="ColorItemTemplate">
            <Grid Margin="5"
                  HeightRequest="120"
                  WidthRequest="105">
                <BoxView Color="{Binding Color}" />
                <Label Text="{Binding Name}"
                       HorizontalOptions="Center"
                       VerticalOptions="Center" />
            </Grid>
        </DataTemplate>
    </ContentPage.Resources>
    <StackLayout Margin="10,35,10,10">
        <Label Text="RefreshView Demo"
               FontAttributes="Bold"
               HorizontalOptions="Center" />
        <Label Text="Pull the items down to refresh the ScrollView." />
        <Label Text="{Binding Items.Count, StringFormat='Number of items: {0}'}" />
        <RefreshView IsRefreshing="{Binding IsRefreshing}"
                     RefreshColor="Teal"
                     Command="{Binding RefreshCommand}">
            <ScrollView>
                <FlexLayout Direction="Row"
                            Wrap="Wrap"
                            AlignItems="Center"
                            AlignContent="Center"
                            BindableLayout.ItemsSource="{Binding Items}"
                            BindableLayout.ItemTemplate="{StaticResource ColorItemTemplate}" />
            </ScrollView>
        </RefreshView>
    </StackLayout>

</ContentPage>

```

MainPage.xaml.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Xamarin.Forms;

namespace App110
{
    public partial class MainPage : ContentPage
    {
        private  bool _hasRefreshedFirstTime;

        //public string From { get; set; }

        //public float HT { get; set; }
        MainPageViewModel mainPageViewModel;
        public MainPage()
        {
            _hasRefreshedFirstTime = false;
            mainPageViewModel =new MainPageViewModel();

            BindingContext = mainPageViewModel;
            InitializeComponent();
        }
        protected  override void OnAppearing()
        {
            base.OnAppearing();

            if (!_hasRefreshedFirstTime)
            {
                Console.WriteLine("===============================OnAppearing=====================");
                mainPageViewModel.RefreshItemsAtFirstTimeAsync();

                _hasRefreshedFirstTime = true;
            }
        }
    }
}

```

MainPageViewModel.cs

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Runtime.CompilerServices;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Input;
using Xamarin.Forms;

namespace App110
{
    public class Item
    {
        public string Name { get; set; }
        public Color Color { get; set; }
    }
    public class MainPageViewModel : INotifyPropertyChanged
    {
        const int RefreshDuration = 2;
        int itemNumber = 1;
        readonly Random random;
         bool isRefreshing;

        public  bool IsRefreshing
        {
            get { return isRefreshing; }
            set
            {
                isRefreshing = value;
                OnPropertyChanged();
            }
        }

        public ObservableCollection<Item> Items { get; private set; }

        public ICommand RefreshCommand => new Command(async () => await DoRefresh());

        public MainPageViewModel()
        {
            random = new Random();
            Items = new ObservableCollection<Item>();
         
        }

        void AddItems()
        {
          
            for (int i = 0; i < 3; i++)
            {
                Items.Add(new Item
                {
                    Color = Color.FromRgb(random.Next(0, 255), random.Next(0, 255), random.Next(0, 255)),
                    Name = $"Item {itemNumber++}"
                });
            }

          
        }
  
        public async  void RefreshItemsAtFirstTimeAsync()
        {
            IsRefreshing = true;
           

        }


        public async Task DoRefresh()
        {
         
            IsRefreshing = true;

            //add your loading code
            await Task.Delay(TimeSpan.FromSeconds(RefreshDuration));
            AddItems();
            IsRefreshing = false;
        }

        #region INotifyPropertyChanged

        public event PropertyChangedEventHandler PropertyChanged;

        void OnPropertyChanged([CallerMemberName] string propertyName = null)
        {
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
        }

        #endregion
    }
}

```